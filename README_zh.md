# 图片颜色分类器

[English](README.md) | [中文](README_zh.md)

一个自动按颜色分类照片的桌面应用。使用 Python 和 PyQt6 构建。

## 功能

- **简单模式**：按主色调分类（红、蓝、绿等）
- **高级模式**：多维度颜色分析 + 自动聚类
- 支持撤销/回退
- 移动文件前可预览

## 技术栈

- Python 3.12
- PyQt6（界面）
- NumPy（计算）
- PIL/Pillow（图像处理）

## 架构

```
src/
├── core/           # 核心逻辑
│   ├── advanced_extractor.py   # 特征提取
│   ├── similarity_calculator.py # 距离度量
│   ├── adaptive_clusterer.py   # 层次聚类
│   ├── category_namer.py       # 自动命名
│   └── advanced_engine.py      # 主引擎
├── ui/             # PyQt6 界面
└── main.py         # 入口
```

## 高级模式算法

高级分类分为 5 个步骤：

### 1. 特征提取
对每张图片：
- 转换到 HSV 和 LAB 色彩空间
- 计算直方图：色调 (180 bins)、明度 (256 bins)、饱和度 (256 bins)
- 在 LAB 空间用 K-Means 提取主色调
- 判断影调（高调 / 中调 / 低调）

### 2. 相似度计算
使用直方图距离度量比较图片：
- **巴氏距离**：衡量分布重叠程度
- 加权组合：色调 (40%) + 明度 (35%) + 饱和度 (25%)
- 构建 N×N 距离矩阵

### 3. 层次聚类
- 使用 Ward 链接方法
- 通过轮廓系数自动选择最佳聚类数
- 也可手动指定类别数量

### 4. 类别命名
根据聚类特征生成描述性名称：
- 影调：高调 / 中调 / 低调
- 色调：暖色 / 冷色 / 中性
- 饱和度：鲜艳 / 适中 / 柔和

示例："高调暖色鲜艳" = 明亮、温暖、鲜艳的图片

### 5. 文件整理
将图片移动到以类别命名的文件夹中。

## 使用方法

1. 选择包含图片的文件夹
2. 选择模式（简单 / 高级）
3. 按需调整设置（聚类数、特征权重）
4. 点击"开始分类"
5. 预览结果并确认

## 构建

```bash
pip install -r requirements.txt
pyinstaller build.spec
```

输出：`dist/ImageColorClassifier/`

## 许可证

MIT
